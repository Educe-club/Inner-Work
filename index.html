<script>
    let allVideos = [
        { title: "Whatâ€™s #triggering the mean monster in you?", url: "https://www.youtube.com/embed/3d1Rz5JYG4M", tags: ["Wellness", "Awareness"] },
        { title: "Transforming into your great man is a layered approach.", url: "https://www.youtube.com/embed/dT-x407XuJA", tags: ["Leveling Up", "Transformation"] },
        { title: "Retelling our story keeps us in the feedback vs feet forward. How do we de-story w/out destroying?", url: "https://www.youtube.com/embed/gSMIdXkGoEU", tags: ["Trauma Wounds", "Poetry"] }
    ];

    function displayVideos(videoArray) {
        const videoList = document.getElementById("videoList");
        
        if (!videoList) {
            console.error("Error: #videoList element not found!");
            return;
        }

        videoList.innerHTML = "";
        
        if (videoArray.length === 0) {
            videoList.innerHTML = "<p>No videos found.</p>";
            return;
        }
        
        videoArray.forEach(video => {
            let videoItem = document.createElement("div");
            videoItem.classList.add("video-item");
            
            let title = document.createElement("div");
            title.classList.add("video-title");
            title.innerText = video.title;
            
            let iframe = document.createElement("iframe");
            iframe.src = video.url;
            iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
            iframe.allowFullscreen = true;
            
            let tags = document.createElement("div");
            tags.classList.add("video-tags");
            tags.innerHTML = "Tags: " + video.tags.map(tag => `<a href='#' onclick='loadVideos("${tag}")'>${tag}</a>`).join(", ");
            
            videoItem.appendChild(title);
            videoItem.appendChild(iframe);
            videoItem.appendChild(tags);
            videoList.appendChild(videoItem);
        });
    }

    function searchVideos() {
        let input = document.getElementById("searchInput").value.toLowerCase();
        let filteredVideos = allVideos.filter(video =>
            video.title.toLowerCase().includes(input) ||
            video.tags.some(tag => tag.toLowerCase().includes(input))
        );
        displayVideos(filteredVideos);
    }

    document.addEventListener("DOMContentLoaded", function() {
        setTimeout(() => {
            const videoList = document.getElementById("videoList");
            if (!videoList) {
                console.error("Error: #videoList element not found!");
            } else {
                displayVideos(allVideos);
            }
        }, 500); // Small delay to ensure rendering
    });
</script>
